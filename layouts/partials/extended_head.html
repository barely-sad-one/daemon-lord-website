<!-- Cookie Consent Banner -->
<div id="cookie-consent-banner" style="display:none;">
  <div class="cookie-text">
    We use cookies and analytics to improve your experience.
  </div>
  <div class="cookie-buttons">
    <button id="accept-cookies">Accept</button>
    <button id="reject-cookies">Reject</button>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const banner = document.getElementById('cookie-consent-banner');
    const accepted = localStorage.getItem('cookies-accepted');

    // Show banner if no decision yet
    if (!accepted) {
        banner.style.display = 'block';
    } else if (accepted === 'true') {
        loadGoogleAnalytics();
    }

    // Accept cookies
    document.getElementById('accept-cookies').addEventListener('click', function() {
        localStorage.setItem('cookies-accepted', 'true');
        banner.style.display = 'none';
        loadGoogleAnalytics();
    });

    // Reject cookies
    document.getElementById('reject-cookies').addEventListener('click', function() {
        localStorage.setItem('cookies-accepted', 'false');
        banner.style.display = 'none';
    });
});

// Function to load GA after consent
function loadGoogleAnalytics() {
    if (!document.getElementById('ga-script')) {
        const script = document.createElement('script');
        script.id = 'ga-script';
        script.async = true;
        script.src = "https://www.googletagmanager.com/gtag/js?id=G-JFCYXHXCN1";
        document.head.appendChild(script);

        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-JFCYXHXCN1');
    }
}
</script>

